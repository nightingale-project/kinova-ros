<launch>

  <arg name="use_urdf" default="true"/>
  <arg name="kinova_robotType" default="j2s7s300" />
	<arg name="kinova_robotSerial" default="not_set" />
	<arg name="use_jaco_v1_fingers" default="false" />
	<arg name="feedback_publish_rate" default="0.1" />
    <arg name="robot_parameters" default="robot_parameters" />

  <node name="j2s7s300_right_driver" pkg="kinova_driver" type="kinova_arm_driver" output="screen" cwd="node" args="$(arg kinova_robotType)" launch-prefix="">
    <rosparam file="$(find kinova_bringup)/launch/config/robot_parameters_right.yaml" command="load" />
    <param name="serial_number" value="$(arg kinova_robotSerial)" />   
    <param name="robot_name" value="j2s7s300_right" />   
    <param name="robot_type" value="$(arg kinova_robotType)" />   
    <param name="use_jaco_v1_fingers" value="$(arg use_jaco_v1_fingers)" />   
    <param name="status_interval_seconds" value="$(arg feedback_publish_rate)" />
  </node>
  
  <node name="j2s7s300_left_driver" pkg="kinova_driver" type="kinova_arm_driver" output="screen" cwd="node" args="$(arg kinova_robotType)" launch-prefix="">
    <rosparam file="$(find kinova_bringup)/launch/config/robot_parameters_left.yaml" command="load" />
    <param name="serial_number" value="$(arg kinova_robotSerial)" />   
    <param name="robot_name" value="j2s7s300_left" />   
    <param name="robot_type" value="$(arg kinova_robotType)" />   
    <param name="use_jaco_v1_fingers" value="$(arg use_jaco_v1_fingers)" />   
    <param name="status_interval_seconds" value="$(arg feedback_publish_rate)" />
  </node>
  
  <!-- Right Arm Action Server -->
  <node name="j2s7s300_right_joint_trajectory_action_server" 
  	pkg="kinova_driver" 
  	type="joint_trajectory_action_server" 
  	output="screen" 
  	respawn="false" 
  	args="j2s7s300_right_driver"/>
  	
  <!-- Right Gripper Action Server -->
  <node name="j2s7s300_right_gripper_command_action_server" 
  	pkg="kinova_driver" 
  	type="gripper_command_action_server" 
  	output="screen" 
  	respawn="false" 
  	args="j2s7s300_right"/>
  
  <!-- Left Arm Action Server -->
  <node name="j2s7s300_left_joint_trajectory_action_server" 
  	pkg="kinova_driver" 
  	type="joint_trajectory_action_server" 
  	output="screen" 
  	respawn="false" 
  	args="j2s7s300_left_driver"/>

  	
  <!-- Left Gripper Action Server -->
  <node name="j2s7s300_left_gripper_command_action_server" 
  	pkg="kinova_driver" 
  	type="gripper_command_action_server" 
  	output="screen" 
  	respawn="false" 
  	args="j2s7s300_left"/>


  <group if="$(arg use_urdf)">
    <param name="robot_description" command="$(find xacro)/xacro '$(find kinova_description)/urdf/movo_arms.xacro'" />
    <node name="j2s7s300_right_state_publisher"
           pkg="robot_state_publisher"
          type="robot_state_publisher">
      <remap from="joint_states" to="/j2s7s300_right_driver/out/joint_state"/>
    </node>
    <node name="j2s7s300_left_state_publisher"
           pkg="robot_state_publisher"
          type="robot_state_publisher">
      <remap from="joint_states" to="/j2s7s300_left_driver/out/joint_state"/>
    </node>
  </group>

</launch>
